<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üé¨ ¬øDe qu√© pel√≠cula es este p√≥ster?</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    /* Colores super vibrantes para ni√±os - sin negro */
    --cyan-bright: #00D9FF;
    --pink-hot: #FF1493;
    --yellow-bright: #FFD700;
    --green-lime: #00FF00;
    --purple-vibrant: #9C27B0;
    --orange-bright: #FF6B00;
    --bg-gradient-1: #FF6EC7;
    --bg-gradient-2: #7B68EE;
    --bg-gradient-3: #00CED1;
    --text-dark: #2D1B69;
    --success: #00FF00;
    --error: #FF1493;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  html, body {
    height: 100%;
    overflow-x: hidden;
  }
  
  body {
    /* Fondo super colorido y vibrante - sin negro */
    background: linear-gradient(135deg, #FF6EC7 0%, #7B68EE 25%, #00CED1 50%, #FFD700 75%, #00FF88 100%);
    background-size: 400% 400%;
    animation: gradientMove 15s ease infinite;
    font-family: 'Poppins', system-ui, -apple-system, sans-serif;
    color: var(--text-dark);
    /* Cambiar a flex-direction column para centrar t√≠tulo y app */
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: 8px;
    min-height: 100vh;
  }
  
  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
  
  /* Estrellas con colores super brillantes */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(4px 4px at 20% 30%, var(--yellow-bright), transparent),
      radial-gradient(3px 3px at 60% 70%, var(--pink-hot), transparent),
      radial-gradient(4px 4px at 50% 50%, var(--cyan-bright), transparent),
      radial-gradient(3px 3px at 80% 10%, var(--green-lime), transparent),
      radial-gradient(4px 4px at 90% 60%, var(--orange-bright), transparent),
      radial-gradient(3px 3px at 33% 80%, var(--pink-hot), transparent);
    background-size: 200% 200%;
    animation: twinkle 8s ease-in-out infinite;
    opacity: 0.6;
    pointer-events: none;
    z-index: 0;
  }
  
  @keyframes twinkle {
    0%, 100% { opacity: 0.5; }
    50% { opacity: 0.8; }
  }
  
  /* Borde decorativo con puntos como en la imagen */
  .app {
    width: min(1200px, 100%);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.9));
    backdrop-filter: blur(20px);
    border: 8px solid var(--cyan-bright);
    border-radius: 32px;
    padding: 6px;
    box-shadow: 
      0 0 0 4px var(--pink-hot),
      0 20px 60px rgba(0, 217, 255, 0.5),
      0 0 100px rgba(255, 20, 147, 0.4);
    position: relative;
    z-index: 1;
    animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  /* Puntos decorativos en el borde */
  .app::before {
    content: '';
    position: absolute;
    inset: -12px;
    border-radius: 32px;
    background: 
      radial-gradient(circle at 5% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 15% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 25% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 35% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 45% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 55% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 65% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 75% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 85% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 95% 5%, white 3px, transparent 3px),
      radial-gradient(circle at 5% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 15% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 25% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 35% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 45% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 55% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 65% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 75% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 85% 95%, white 3px, transparent 3px),
      radial-gradient(circle at 95% 95%, white 3px, transparent 3px);
    background-size: 100% 100%;
    pointer-events: none;
    z-index: -1;
  }
  
  /* Reducir padding para maximizar espacio */
  .app-inner {
    background: linear-gradient(135deg, #7B68EE, #FF6EC7);
    border-radius: 24px;
    padding: 12px;
  }
  
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  /* Reducir gap entre elementos */
  .stats-row {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    margin-bottom: 8px;
  }
  
  .stats-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    align-items: center;
  }
  
  /* Pills con colores super vibrantes */
  .pill {
    padding: 6px 12px;
    border-radius: 50px;
    border: 3px solid white;
    font-weight: 700;
    font-size: 12px;
    background: var(--yellow-bright);
    color: var(--text-dark);
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }
  
  .pill:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  }
  
  .pill b {
    color: var(--text-dark);
    font-weight: 800;
    margin-left: 4px;
  }
  
  .pill.score-pill {
    background: var(--pink-hot);
    color: white;
  }
  
  .pill.score-pill b {
    font-size: 14px;
    color: white;
  }
  
  /* Reducir margen de barra de progreso */
  .progress-bar {
    width: 100%;
    height: 8px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 50px;
    overflow: hidden;
    margin: 8px 0;
    position: relative;
    border: 2px solid white;
  }
  
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--green-lime), var(--cyan-bright), var(--pink-hot));
    border-radius: 50px;
    transition: width 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.8);
  }
  
  /* Reducir gap en layout horizontal */
  .game-container {
    display: grid;
    grid-template-columns: 65fr 35fr;
    gap: 16px;
    margin: 10px 0;
    align-items: start;
  }
  
  .stage {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  
  /* Imagen del poster con borde colorido */
  .imgBox {
    position: relative;
    display: inline-block;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 
      0 0 0 4px var(--pink-hot),
      0 0 0 8px var(--cyan-bright),
      0 20px 60px rgba(0, 0, 0, 0.4);
    transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  .imgBox:hover {
    transform: scale(1.02);
  }
  
  .posterBase, .posterCover {
    width: 100%;
    /* Aumentar tama√±o m√°ximo del poster de 700px a 900px */
    max-width: 900px;
    height: auto;
    /* Aumentar altura m√°xima de 800px a 950px */
    max-height: 950px;
    object-fit: contain;
    display: block;
  }
  
  .posterCover {
    position: absolute;
    inset: 0;
    filter: blur(12px) brightness(0.02) saturate(0);
    opacity: 0.98;
    --rev: 10%;
    -webkit-mask-image: radial-gradient(circle at 50% 50%, transparent var(--rev), #000 calc(var(--rev) + 2%));
    mask-image: radial-gradient(circle at 50% 50%, transparent var(--rev), #000 calc(var(--rev) + 2%));
    transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
  }
  
  /* Bot√≥n de ayuda con colores vibrantes */
  .hint-btn {
    padding: 10px 20px;
    border-radius: 50px;
    border: 3px solid white;
    background: var(--orange-bright);
    color: white;
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
    font-family: 'Poppins', sans-serif;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  .hint-btn:hover:not(:disabled) {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
  }
  
  .hint-btn:active:not(:disabled) {
    transform: translateY(-1px) scale(1.02);
  }
  
  .hint-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
  }
  
  /* √Årea de respuestas con miniaturas de posters */
  .answers-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  .ans {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  
  /* Aumentar tama√±o de fuente para proyecci√≥n */
  .btn {
    position: relative;
    aspect-ratio: 3/1;
    border-radius: 12px;
    border: 3px solid white;
    background: linear-gradient(135deg, var(--cyan-bright), var(--purple-vibrant));
    color: white;
    font-weight: 700;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    overflow: hidden;
    font-family: 'Poppins', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    line-height: 1.2;
  }
  
  .btn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
    z-index: 0;
  }
  
  .btn span {
    position: relative;
    z-index: 1;
  }
  
  .btn:hover:not(:disabled) {
    transform: scale(1.05);
    border-color: var(--yellow-bright);
    box-shadow: 0 8px 24px rgba(255, 215, 0, 0.6);
  }
  
  /* Estilos para respuestas correctas e incorrectas m√°s vibrantes */
  .btn.correct {
    background: var(--green-lime);
    border-color: white;
    animation: correctPulse 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 0 30px rgba(0, 255, 0, 0.8);
  }
  
  .btn.wrong {
    background: var(--pink-hot);
    border-color: white;
    animation: wrongShake 0.5s cubic-bezier(0.16, 1, 0.3, 1);
    box-shadow: 0 0 30px rgba(255, 20, 147, 0.8);
  }
  
  @keyframes correctPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }
  
  @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }
  
  /* Reducir margen superior de controles */
  .controls {
    display: flex;
    gap: 16px;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    flex-wrap: wrap;
  }
  
  /* Botones de control con colores vibrantes */
  .btnSm {
    padding: 10px 20px;
    border-radius: 50px;
    border: 3px solid white;
    background: var(--cyan-bright);
    color: white;
    font-weight: 700;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  .btnSm:hover:not(:disabled) {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 8px 20px rgba(0, 217, 255, 0.6);
  }
  
  .btnSm:disabled {
    opacity: 0.3;
    cursor: not-allowed;
  }
  
  .status {
    color: white;
    font-weight: 700;
    font-size: 13px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }
  
  /* Confetti */
  .confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    position: absolute;
    animation: confettiFall 3s linear forwards;
    z-index: 1000;
  }
  
  @keyframes confettiFall {
    to {
      transform: translateY(100vh) rotate(360deg);
      opacity: 0;
    }
  }
  
  /* Nuevo estilo para el t√≠tulo principal en la parte superior izquierda */
  .game-title {
    text-align: center;
    font-size: 48px;
    font-weight: 800;
    color: white;
    text-shadow: 
      3px 3px 0 var(--pink-hot),
      6px 6px 0 var(--cyan-bright),
      4px 4px 20px rgba(0, 0, 0, 0.5);
    margin-bottom: 20px;
    animation: titleBounce 2s ease-in-out infinite;
    letter-spacing: 2px;
    /* Asegurar que el t√≠tulo ocupe todo el ancho disponible */
    width: 100%;
  }
  
  @keyframes titleBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }
  
  /* Responsive: volver a vertical en m√≥viles */
  @media (max-width: 768px) {
    .game-container {
      grid-template-columns: 1fr;
      gap: 24px;
    }
    
    .app-inner {
      padding: 24px 20px;
    }
    
    /* Ajustar tama√±o de poster en m√≥viles */
    .posterBase, .posterCover {
      max-width: 350px;
    }
    
    .ans {
      display: flex;
      flex-direction: column;
    }
    
    /* Ajustar t√≠tulo en m√≥viles */
    .game-title {
      font-size: 28px;
      margin-bottom: 15px;
    }
  }
</style>
</head>
<body>
<div class="game-title">üé¨ ¬°Adivina la pel√≠cula!</div>

<div class="app">
  <div class="app-inner">
    <div class="stats-row">
      <div class="stats-group">
        <div class="pill score-pill">üèÜ Puntos: <b id="score">0</b></div>
        <div class="pill">üíé Valor: <b id="roundValue">5</b> pts</div>
      </div>
      <div class="pill">üìä Ronda: <b id="round">1</b>/<b id="total">10</b></div>
    </div>
    
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 10%"></div>
    </div>

    <div class="game-container">
      <div class="stage">
        <div class="imgBox">
          <img id="posterBase" class="posterBase" src="/placeholder.svg" alt="P√≥ster a color">
          <img id="posterCover" class="posterCover" src="/placeholder.svg" alt="P√≥ster cubierto">
        </div>
        <button id="hint" class="hint-btn">üí° Pedir Ayuda (‚Äì1 punto)</button>
      </div>

      <div class="answers-container">
        <div id="answers" class="ans"></div>
      </div>
    </div>

    <div class="controls">
      <span id="status" class="status">‚ú® Listo para jugar</span>
      <button id="next" class="btnSm" disabled>Siguiente Ronda ‚è≠</button>
    </div>
  </div>
</div>

<script>
const $ = s => document.querySelector(s);
const $$ = s => Array.from(document.querySelectorAll(s));

/* ‚öôÔ∏è Config */
const OMDB_API_KEY = "a22fb87a";
const TERMS = ["batman","avengers","harry potter","star wars","pixar","spider-man","jurassic","matrix","frozen","toy story","disney","marvel","dc","mission impossible","shrek","pokemon","fast furious","pirates caribbean","rocky","terminator"];

const HINT_STEP = 15;
const MAX_POINTS = 5;
const MIN_POINTS = 1;
const HINT_PENALTY = 1;

/* üîä Sonidos mejorados */
const sndCorrect = new Audio("https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg");
const sndWrong = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

/* üìä Estado */
let state = {
  score: 0,
  round: 1,
  total: 10,
  locked: false,
  reveal: 10,
  hints: 0,
  roundValue: MAX_POINTS,
  current: null
};

/* üéä Confetti effect */
function createConfetti() {
  /* Colores de confetti super vibrantes */
  const colors = ['#00D9FF', '#FF1493', '#FFD700', '#00FF00', '#FF6B00', '#9C27B0'];
  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const confetti = document.createElement('div');
      confetti.className = 'confetti';
      confetti.style.left = Math.random() * 100 + '%';
      confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.animationDelay = Math.random() * 0.5 + 's';
      confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
      document.body.appendChild(confetti);
      setTimeout(() => confetti.remove(), 3000);
    }, i * 30);
  }
}

/* üîé OMDb helpers */
function pick(arr, n) {
  const a = [...arr], out = [];
  while (out.length < n && a.length) {
    out.push(a.splice(Math.floor(Math.random() * a.length), 1)[0]);
  }
  return out;
}

async function searchBatch(term) {
  const url = `https://www.omdbapi.com/?apikey=${OMDB_API_KEY}&s=${encodeURIComponent(term)}&type=movie`;
  const r = await fetch(url);
  const d = await r.json();
  if (d.Response === 'True') return d.Search.filter(x => x.Poster && x.Poster !== 'N/A');
  return [];
}

async function getRoundData() {
  let results = [];
  for (let i = 0; i < 6 && results.length < 6; i++) {
    const t = TERMS[Math.floor(Math.random() * TERMS.length)];
    const batch = await searchBatch(t);
    results = [...results, ...batch];
    results = [...new Map(results.map(o => [o.imdbID, o])).values()];
  }
  if (results.length < 4) throw new Error('Insuficientes resultados OMDb');
  const [correct, ...rest] = pick(results, 4);
  return { correct, distractors: rest };
}

/* üß© UI */
function updateProgress() {
  const progress = (state.round / state.total) * 100;
  $('#progressFill').style.width = progress + '%';
}

function renderOptions(correctTitle, distractors) {
  const names = [correctTitle, ...distractors.map(d => d.Title)];
  const opts = [...new Set(names)].slice(0, 4).sort(() => Math.random() - 0.5);
  const box = $('#answers');
  box.innerHTML = '';
  
  opts.forEach((t, i) => {
    const b = document.createElement('button');
    b.className = 'btn';
    const span = document.createElement('span');
    span.textContent = t;
    b.appendChild(span);
    b.onclick = () => choose(t);
    b.style.animationDelay = (i * 0.1) + 's';
    box.appendChild(b);
  });
}

function lock(sel) {
  state.locked = true;
  const correct = state.current.correctTitle;
  
  $$('#answers .btn').forEach(b => {
    if (b.textContent === correct) b.classList.add('correct');
    if (sel && b.textContent === sel && sel !== correct) b.classList.add('wrong');
    b.disabled = true;
  });
  
  $('#next').disabled = false;
}

function revealFull() {
  const cover = $('#posterCover');
  cover.style.setProperty('--rev', '120%');
  cover.style.opacity = '0';
}

/* üîÑ Ronda */
async function nextRound() {
  $('#next').disabled = true;
  $('#status').textContent = 'üîç Buscando p√≥ster...';
  state.locked = false;
  state.reveal = 10;
  state.hints = 0;
  state.roundValue = MAX_POINTS;
  $('#roundValue').textContent = state.roundValue;
  
  updateProgress();

  const cover = $('#posterCover');
  cover.style.opacity = '0.98';
  cover.style.setProperty('--rev', state.reveal + '%');

  try {
    const { correct, distractors } = await getRoundData();
    state.current = { correctTitle: correct.Title, poster: correct.Poster };
    $('#posterBase').src = correct.Poster;
    $('#posterCover').src = correct.Poster;
    renderOptions(correct.Title, distractors);
    $('#status').textContent = '‚ú® Listo para jugar';
    $('#hint').disabled = false;
  } catch (e) {
    console.error(e);
    $('#status').textContent = '‚ùå Error cargando datos. Verifica tu API key de OMDb.';
  }
}

/* ‚úÖ Elecci√≥n */
function choose(title) {
  if (state.locked) return;
  revealFull();
  
  if (title === state.current.correctTitle) {
    state.score += state.roundValue;
    $('#score').textContent = state.score;
    $('#status').textContent = 'üéâ ¬°Correcto! +' + state.roundValue + ' puntos';
    sndCorrect.play();
    createConfetti();
  } else {
    $('#status').textContent = '‚ùå Incorrecto. Era: ' + state.current.correctTitle;
    sndWrong.play();
  }
  
  lock(title);
}

/* üïµÔ∏è Ayuda */
$('#hint').addEventListener('click', () => {
  if (state.locked) return;
  
  state.reveal = Math.min(state.reveal + HINT_STEP, 100);
  $('#posterCover').style.setProperty('--rev', state.reveal + '%');
  
  state.hints++;
  state.roundValue = Math.max(MIN_POINTS, MAX_POINTS - state.hints * HINT_PENALTY);
  $('#roundValue').textContent = state.roundValue;
  
  if (state.reveal >= 100) {
    $('#hint').disabled = true;
  }
});

/* ‚è≠ Siguiente */
$('#next').addEventListener('click', () => {
  state.round++;
  
  if (state.round <= state.total) {
    $('#round').textContent = state.round;
    nextRound();
  } else {
    revealFull();
    $('#status').textContent = `üèÅ ¬°Juego terminado! Puntuaci√≥n final: ${state.score} puntos`;
    $('#answers').innerHTML = '';
    $('#posterBase').src = '';
    $('#posterCover').src = '';
    $('#next').disabled = true;
    $('#hint').disabled = true;
    
    if (state.score >= 40) {
      createConfetti();
    }
  }
});

/* ‚ñ∂Ô∏è Init */
(function init() {
  $('#round').textContent = state.round;
  $('#total').textContent = state.total;
  $('#score').textContent = state.score;
  $('#roundValue').textContent = state.roundValue;
  updateProgress();
  nextRound();
})();
</script>
</body>
</html>
